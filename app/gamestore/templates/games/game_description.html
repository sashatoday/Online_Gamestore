{% extends "base.html" %}
{% load static %}

{% block title %}{{ game.name }}{% endblock %}

{% block content %}

<div class="card">
	<div class="row">
		<aside class="col-sm-5 border-right">
<article class="gallery-wrap"> 
  <div> 
  {% if not game.picture_url %}
    <img class="card-img-top" src="{% static 'images/default_pic.png' %}" alt="Default Game Picture">
  {% else %}
    <img class="card-img-top" src="{{ game.picture_url }}" alt="Game Picture">
  {% endif %}
  </div>
</article> 
<article class="card-body p-5">
  <div>
      <h5 class="title mb-3">Best scores</h5>
    <table style="width:100%">
      {% for score in scores %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="/user/{{ score.scorer.user.id }}">{{ score.scorer.user.username }}</a></td>
            <td>{{ score.value }}</td>
          </tr>
      {% endfor %}
    </table>
   </div>
</article>
		</aside>
		<aside class="col-sm-7">
<article class="card-body p-5">
	<h3 class="title mb-3">{{ game.name }}</h3>
<p>
	<span class="price h4 text-warning"> 
		<span class="num">{{ game.price }} &euro;</span>
	</span> 
</p>
<dl>
  {% if game.description %}
    <dt>Description</dt>
    <dd><p>{{ game.description }}</p></dd>
  {% endif %}
</dl>
<hr>
<dl>
  <dt>Category</dt>
  <a href="/search_game"><dd>{{ game.get_category_display }}</dd></a>
</dl>
<dl>
  <dt>Age limit</dt>
  <dd>{{ game.age_limit }}+</dd>
</dl>
<dl>
  <dt>Developer</dt>
  <a href="/user/{{ game.developer.user.id }}"><dd>{{ game.developer.user.username }}</dd></a>
</dl>

<hr>
<form action="" method="post">{% csrf_token %}
  {% if owner or purchased_game %}
    <a href="/play_game/{{game.id}}" class="btn btn-primary btn-block text-uppercase">Play</a>
    {% if owner %}
        <a class="btn btn-outline-primary btn-block" href="/edit_game/{{game.id}}" role="button">Edit game</a>
    {% endif %}
  {% else %}
	<a href="/buy_game/{{game.id}}" class="btn btn-primary text-uppercase"><i class="fas fa-shopping-cart"></i> Buy now </a>
    {% if saved_game or anonym %}
        <button class="btn btn-outline-primary btn-secondary" disabled> <i class="far fa-bookmark"></i> Save to wishlist </button>
    {% else %}
        <button name="wishlist" type="submit" class="btn btn-outline-primary"> <i class="far fa-bookmark"></i> Save to wishlist </button>
    {% endif %}
  {% endif %}
</form>
</article> <!-- card-body.// -->
		</aside> <!-- col.// -->
	</div> <!-- row.// -->
</div> <!-- card.// -->

{% endblock %}